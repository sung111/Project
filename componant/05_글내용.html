<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/05_글내용.css">
</head>

<body>
    <div class="box">
        <div class="post-title">사내 복지 제도 개선 안내입니다.</div>
        <div class="post-info">작성자: 안혜리 | 날짜: 2025-01-20 | 조회수: 15</div>
        <div class="post-content">
            사내 복지 제도를 개선하기 위한 새로운 정책이 도입됩니다. 직원 여러분의 의견을 반영하여
            더욱 나은 복지 환경을 조성할 계획입니다. 자세한 내용은 아래와 같습니다:
            <ul>
                <li>1. 연간 건강검진 지원 확대</li>
                <li>2. 사내 카페 운영 시간 연장</li>
                <li>3. 직원 휴가 사용 장려 프로그램</li>
            </ul>
            여러분의 많은 참여 바랍니다!
        </div>
        <div class="button-container">
            <button type="button" id="list">목록으로</button>
            <button type="button" id="modify">수정</button>
            <button type="button">삭제</button>
        </div>
        <div class="comment-section">
            <h2>댓글</h2>
            <div class="comment">
                <div class="usercomment">
                    <span class="author">박혜성</span>
                    <span class="date">2025-01-23</span>
                    <p>사내 복지가 정말 많이 개선되었네요! 기대됩니다.</p>
                </div>
                <div class="cmtbtn">
                    <button class="commentbtn" type="button">수정</button>
                    <button class="commentbtn" type="button">삭제</button>
                </div>
            </div>
            <div class="comment">
                <div class="usercomment">
                    <span class="author">김경민</span>
                    <span class="date">2025-01-24</span>
                    <p class="comment-text">여러분의 피드백이 반영된 점이 인상적입니다. 감사합니다!</p>
                </div>
                <div class="cmtbtn">
                    <button class="commentbtedit" type="button">수정</button>
                    <button class="commentbtndel" type="button">삭제</button>
                </div>
            </div>
            <div class="comment-section abc">
                <textarea placeholder="댓글을 입력하세요."></textarea>
                <button type="button" class="ok">등록</button>
            </div>
        </div>

        <script>
            const list = document.querySelector('#list');
            const iframe = parent.document.querySelector("iframe");

            list.addEventListener('click', function () {
                iframe.src = "../componant/03_사내복지.html";
            });

            // 권한 확인을 위한 변수
            const userRole = window.parent.localStorage.getItem("userRole");

            // 수정 버튼 클릭 시
            document.addEventListener("DOMContentLoaded", function () {
                const modifyButton = document.querySelector('#modify');

                // 권한이 'admin'인 경우에만 수정 가능
                if (userRole === 'admin') {
                    modifyButton.addEventListener('click', function () {
                        const title = document.querySelector('.post-title').textContent;
                        const content = document.querySelector('.post-content').textContent;

                        // localStorage에 저장
                        localStorage.setItem('postTitle', title);
                        localStorage.setItem('postContent', content);

                        // 글쓰기 페이지로 이동
                        iframe.src = "../componant/06_글쓰기.html";
                    });
                } else {
                    modifyButton.addEventListener('click', function () {
                        alert("권한이 없습니다."); // 권한이 없을 때 경고 메시지
                    });
                }
            });
            
            

        </script>
    </div>
</body>

</html>
